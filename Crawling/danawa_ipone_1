from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from bs4 import BeautifulSoup
from selenium.webdriver.common.by import By

import time
from tqdm import tqdm_notebook

import pandas as pd
import numpy as np

ser = Service('../chromedriver.exe')
driver = webdriver.Chrome(service = ser)
options = webdriver.ChromeOptions()
options.add_experimental_option("excludeSwitches", ["enable-logging"])

url = 'https://search.danawa.com/dsearch.php?k1=%EC%95%84%EC%9D%B4%ED%8F%B0%2014'
driver.get(url)

html = driver.page_source
soup = BeautifulSoup(html, 'html.parser')

prod_items = soup.select('div.main_prodlist > ul.product_list > li.prod_item ')
len(prod_items)

prod_items[0].select('a.click_log_product_standard_title_')[0].text
title = prod_items[0].select('p.prod_name > a')[0].text
spec_list = prod_items[0].select('div.spec_list')[0].text.strip()
price = prod_items[0].select('li.rank_one > p.price_sect > a > strong')[0].\
text.strip().replace(',', "")
spec_list = spec_list.strip().replace(' ', "")
print(title, spec_list, price, sep = '   |||  ')

prod_data = []

for prod_item in prod_items:
    try:
        title = prod_item.select('p.prod_name > a')[0].text
    except:
        title = ""

    try:
        spec_list = prod_item.select('div.spec_list')[0].text.strip()
    except:
        spec_list = ""

    try:
        price = prod_item.select('li.rank_one > p.price_sect > a > strong')[0].\
text.strip().replace(',', "")
    except:
        price = 0

    mylist = [title, spec_list, price]

    prod_data.append(mylist)

prod_data[0:5]
